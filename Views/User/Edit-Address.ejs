<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="../Assets/img/logo.png">

    <title>Edit Address</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .container {
            width: 60%;
            margin: auto;
            margin-top: 5%;
        }
    </style>
</head>

<body>
    <div class="container">
        <form id="editAddressForm" action="/save-edited-address" method="post">
            <div class="mb-3">
                <label for="name" class="form-label">Name</label>
                <input type="text" class="form-control" id="name" name="name"
                    placeholder="Enter name" required value="<%= address.name %>">
                <div id="nameError" class="text-danger"></div>
            </div>
            <div class="mb-3">
                <label for="mobile" class="form-label">Mobile</label>
                <input type="number" class="form-control" id="mobile"
                    name="mobile" placeholder="Enter mobile number" required value="<%= address.mobile %>">
                <div id="mobileError" class="text-danger"></div>
            </div>
            <div class="mb-3">
                <label for="landmark" class="form-label">Landmark</label>
                <input type="text" class="form-control" id="landmark"
                    name="landmark" placeholder="Enter landmark" required value="<%= address.landmark %>">
                <div id="landmarkError" class="text-danger"></div>
            </div>
            <div class="mb-3">
                <label for="city" class="form-label">City</label>
                <input type="text" class="form-control" id="city" name="city"
                    placeholder="Enter city" required value="<%= address.city %>">
                <div id="cityError" class="text-danger"></div>
            </div>
            <div class="mb-3">
                <label for="state" class="form-label">State</label>
                <input type="text" class="form-control" id="state" name="state"
                    placeholder="Enter state" required value="<%= address.state %>">
                <div id="stateError" class="text-danger"></div>
            </div>
            <div class="mb-3">
                <label for="pincode" class="form-label">Pincode</label>
                <input type="number" class="form-control" id="pincode"
                    name="pincode" placeholder="Enter pincode" required value="<%= address.pincode %>">
                <div id="pincodeError" class="text-danger"></div>
            </div>
            <div class="mb-3">
                <label for="district" class="form-label">District</label>
                <input type="text" class="form-control" id="district"
                    name="district" placeholder="Enter district" required value="<%= address.district %>">
                <div id="districtError" class="text-danger"></div>
            </div>
            <div class="mb-3">
                <label for="address" class="form-label">Address</label>
                <textarea class="form-control" id="address" name="address"
                    rows="3" placeholder="Enter address" required><%= address.address %></textarea>
                <div id="addressError" class="text-danger"></div>
            </div>
            <input type="hidden" name="ID" value="<%=address._id%>">
            <button type="submit" class="btn btn-primary">Save Address</button>
        </form>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"></script>
    <script>
        document.getElementById('editAddressForm').addEventListener('submit', function (event) {
            // Reset all error messages
            var errorFields = ['name', 'mobile', 'landmark', 'city', 'state', 'pincode', 'district', 'address'];
            errorFields.forEach(function (field) {
                document.getElementById(field + 'Error').textContent = '';
            });

            // Validation for name
            var name = document.getElementById('name').value.trim();
            if (name.length < 3) {
                document.getElementById('nameError').textContent = 'Name must be at least 3 characters long';
                event.preventDefault();
                return false;
            }

            // Validation for mobile
            var mobile = document.getElementById('mobile').value.trim();
            if (mobile.length !== 10 || isNaN(mobile)) {
                document.getElementById('mobileError').textContent = 'Mobile must be a 10-digit number';
                event.preventDefault();
                return false;
            }

            // Validation for landmark
            var landmark = document.getElementById('landmark').value.trim();
            if (landmark.length < 3) {
                document.getElementById('landmarkError').textContent = 'Landmark must be at least 3 characters long';
                event.preventDefault();
                return false;
            }

            // Validation for city
            var city = document.getElementById('city').value.trim();
            if (city.length < 3) {
                document.getElementById('cityError').textContent = 'City must be at least 3 characters long';
                event.preventDefault();
                return false;
            }

            // Validation for state
            var state = document.getElementById('state').value.trim();
            if (state.length < 3) {
                document.getElementById('stateError').textContent = 'State must be at least 3 characters long';
                event.preventDefault();
                return false;
            }

            // Validation for pincode
            var pincode = document.getElementById('pincode').value.trim();
            if (pincode.length < 6 || isNaN(pincode)) {
                document.getElementById('pincodeError').textContent = 'Pincode must be a number with minimum six characters';
                event.preventDefault();
                return false;
            }

            // Validation for district
            var district = document.getElementById('district').value.trim();
            if (district.length < 3) {
                document.getElementById('districtError').textContent = 'District must be at least 3 characters long';
                event.preventDefault();
                return false;
            }

            // Validation for address
            var address = document.getElementById('address').value.trim();
            if (address.length < 10) {
                document.getElementById('addressError').textContent = 'Address must be at least 10 characters long';
                event.preventDefault();
                return false;
            }

            return true;
        });
    </script>

</body>

</html>
